'use strict';

var fs = require('fs');

module.exports = {
  eraseProjectDirectories: function eraseProjectDirectories(projectSlug, projectName) {
    var helpers = require('./');

    return new Promise(function (resolve, reject) {
      var msg;
      var projectFolder;
      var packageFolder;

      if (projectName === projectSlug) {
        projectFolder = fs.existsSync(projectName);
      } else {
        projectFolder = fs.existsSync(projectName);
        packageFolder = fs.existsSync(projectSlug);
      }

      if (projectFolder && packageFolder) {
        msg = "It will erase data in ".concat(projectName, " and in ").concat(projectSlug, ". Continue?");
      } else if (projectFolder) {
        msg = "It will erase data in ".concat(projectName, ". Continue?");
      } else if (packageFolder) {
        msg = "It will erase data in ".concat(projectSlug, ". Continue?");
      } else {
        resolve();
        return;
      }

      helpers.showConfirmationPrompt(msg).then(function (answer) {
        if (answer) {
          helpers.removeFolder(projectName, function () {
            return helpers.removeFolder(projectSlug, function () {
              return resolve();
            });
          });
        } else reject();
      });
    });
  }
};