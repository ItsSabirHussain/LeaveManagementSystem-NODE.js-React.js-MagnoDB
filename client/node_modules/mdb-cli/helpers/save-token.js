'use strict';

var fs = require('fs');

var globals = require('../config/index');

module.exports = {
  saveToken: function saveToken(userToken) {
    if (userToken) {
      var tokenDir = globals.tokenDir;
      var tokenFile = tokenDir + globals.tokenFile;
      fs.mkdir(tokenDir, {
        recursive: true,
        mode: 493
      }, function (err) {
        if (err && err.code !== 'EEXIST') throw err;
        fs.writeFile(tokenFile, userToken, {
          encoding: 'utf8',
          mode: 420
        }, function (err) {
          if (err) throw err;
        });
      });
      return true;
    }

    return false;
  }
};